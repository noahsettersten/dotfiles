# set -g mouse on

# Setting the prefix from C-b to C-a
unbind C-b
set -g prefix C-a

set -g base-index 1
setw -g pane-base-index 1

# set -g default-terminal 'screen-256color'
set -g default-terminal 'xterm-256color'
set -ga terminal-overrides ',alacritty:RGB'

# renumber windows sequentially after closing any of them
set -g renumber-windows on

# set the status line's colors
# set -g status-style fg=white,bg=black
# set the color of the window list
# setw -g window-status-style fg=cyan,bg=default,dim
# set colors for the active window
# setw -g window-status-current-style fg=white,bg=red,bright
# Command / message line colors
# set -g message-style fg=white,bg=black,bright

# Set the active/inactive window styles
# set -g window-style 'bg=default'
# set -g window-active-style 'bg=#272936'

# Status line left side
# set -g status-left-length 8
# set -g status-left "#[fg=green]S:#S"

# Center the window list
set -g status-justify centre

# bind-key r source-file ~/.tmux.conf

# enable vi keys.
setw -g mode-keys vi
# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi v send-keys -X begin-selection

# Make Vim responsive to esc
set -s escape-time 0

# Separate and join panes
# bind-key b break-pane
# bind-key Enter command-prompt "joinp -t:%%" # %% = prompt for window.pane [-V|H] # vert|hor split

# Smart pane switching with awareness of vim splits
# See https://github.com/numToStr/Navigator.nvim/wiki/Tmux-Integration
# is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|hx)(diff)?$"'
# bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
# bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
# bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
# bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"
# bind -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"

# Statusbar config below generated by tmuxline.vim on Fri, 10 Jun 2022
set -g status-justify "centre"
set -g status "on"
set -g status-left-style "none"
set -g message-command-style "fg=#e2e2e3,bg=#3b3e48"
set -g status-right-style "none"
set -g pane-active-border-style "fg=#3b3e48"
set -g status-style "none,bg=#33353f"
set -g message-style "fg=#e2e2e3,bg=#3b3e48"
set -g pane-border-style "fg=#33353f"
set -g status-right-length "100"
set -g status-left-length "100"
setw -g window-status-activity-style "underscore,fg=#7f8490,bg=#33353f"
setw -g window-status-separator ""
setw -g window-status-style "none,fg=#7f8490,bg=#33353f"
set -g status-left "#[fg=#7f8490,bg=#33353f] #S   #[fg=#7f8490,bg=#33353f] #W #[fg=#33353f,bg=#33353f,nobold,nounderscore,noitalics] "
set -g status-right "#[fg=#33353f,bg=#33353f,nobold,nounderscore,noitalics]#[fg=#7f8490,bg=#33353f]  %a #[fg=#33353f,bg=#33353f,nobold,nounderscore,noitalics]#[fg=#7f8490,bg=#33353f] %b %d  %R "
setw -g window-status-format "#[fg=#33353f,bg=#33353f,nobold,nounderscore,noitalics]#[default] #I  #W #[fg=#33353f,bg=#33353f,nobold,nounderscore,noitalics]"
setw -g window-status-current-format "#[fg=#33353f,bg=#3b3e48,nobold,nounderscore,noitalics]#[fg=#e2e2e3,bg=#3b3e48] #I  #W #[fg=#3b3e48,bg=#33353f,nobold,nounderscore,noitalics]"
# End tmuxline.vim generated config

# List of plugins: Supports `github_username/repo` or full git repo URLs
set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-pain-control'

set -g @plugin 'catppuccin/tmux'
set -g @catppuccin_flavour 'macchiato'

# To fix window titles with the Catppuccin plugin. See https://github.com/catppuccin/tmux/issues/431#issuecomment-2521746827
set -g @catppuccin_window_text "#{?#{!=:#W,fish},#W,#T}"
set -g @catppuccin_window_current_text "#{?#{!=:#W,fish},#W,#T}"

# bind a last-window

setenv -g TMUX_PLUGIN_MANAGER_PATH "$HOME/.tmux/plugins/"

if "test ! -d ~/.tmux/plugins/tpm" \
  "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && \
      ~/.tmux/plugins/tpm/bin/install_plugins'"

# Initializes TMUX plugin manager.
# Keep this line at the very bottom of tmux.conf.
run-shell '~/.tmux/plugins/tpm/tpm'


# A few lines above this it says to keep the run-shell command "at the very
# bottom of this file", which is great if you want everything in tmux-sensible,
# but for some reason my display-time wasn't being honored when defined above,
# so just put it below to manually override tpm/tmux-sensible.

# timeout
set -g display-time 750

# Support cursor shape in nvim
# set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

# Use Fish as shell
set-option -g default-command "reattach-to-user-namespace -l /opt/homebrew/bin/fish"
set-option -g default-command /opt/homebrew/bin/fish
set-option -g default-shell /opt/homebrew/bin/fish
